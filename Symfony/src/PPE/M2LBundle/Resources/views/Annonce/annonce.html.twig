{% extends 'PPEM2LBundle:Default:layout.html.twig' %}

{% block body %}

	<div id="annonce_recherche">
		<a href="#annonceAdd" class="ajoutAnnonce"><input type="button" value="Ajouter annonce" class="submit" /></a>
	</div>

	<div id="annonceAdd" style="display:none;text-align:center">

		<h2>Ajouter une annonce</h2>

		{{ form_start(form) }}

		{# TITRE #}
		<div class="form-group">
			{# Génération du label. #}
			{{ form_label(form.titre, "Titre", {'label_attr':{'class': 'col-sm3 control-label'}}) }}

			{# Affichage des erreurs pour ce champ précis. #}
			{{ form_errors(form.titre) }}

			<div class="col-sm4">
			{# Génératiob de l'input. #}
				{{ form_widget(form.titre, {'attr': {'class': 'form-control'}}) }}
			</div>
		</div>

		{# DESCRIPTION #}
		<div class="form-group">
			{# Génération du label. #}
			{{ form_label(form.description, "Description", {'label_attr':{'class': 'col-sm3 control-label'}}) }}

			{# Affichage des erreurs pour ce champ précis. #}
			{{ form_errors(form.description) }}

			<div class="col-sm4 ">
			{# Génératiob de l'input. #}
				{{ form_widget(form.description, {'attr': {'class': 'form-control'}}) }}
			</div>
		</div>

		{# IMAGE #}
		<div class="form-group">
			{# Génération du label. #}
			{{ form_label(form.image, "Image", {'label_attr':{'class': 'col-sm3 control-label'}}) }}

			{# Affichage des erreurs pour ce champ précis. #}
			{{ form_errors(form.image) }}

			<div class="col-sm4">
			{# Génératiob de l'input. #}
				{{ form_widget(form.image, {'attr': {'class': 'form-control'}}) }}
			</div>
		</div>

		{# PRIX #}
		<div class="form-group">
			{# Génération du label. #}
			{{ form_label(form.prix, "Prix", {'label_attr':{'class': 'col-sm3 control-label'}}) }}

			{# Affichage des erreurs pour ce champ précis. #}
			{{ form_errors(form.prix) }}

			<div class="col-sm4">
			{# Génératiob de l'input. #}
				{{ form_widget(form.prix, {'attr': {'class': 'form-control'}}) }}
			</div>
		</div>

		<div class="form-group">
			{# Génération du label. #}

			<div class="col-sm4">
			{# Génératiob de l'input. #}
				{{ form_widget(form.publier, {'attr': {'class': 'form-control'}}) }}
			</div>
		</div>

		{{ form_rest(form) }}

		{{ form_end(form) }}

	</div>

<div id="annonce_content">
	{% set i = 1 %}
	{% for annonce in annonceList %}
	    <div class="annonce" id="{{ i }}">

			<div class="block_shadow annonce_img"><img src="{{ asset('bundles/ppem2l/img/' ~ annonce.image) }}" class="img-responsive img_annonce" /></div>

	    	<div class="annonce_texte block_shadow">
	    		<div class="annonce_titre">
		    		<h1>{{ annonce.titre }}</h1>
	    		</div>
	
	    		<p class="description">
	    			{{ annonce.description }}
	    		</p>
	    		<p class="prix">{{ annonce.prix }}€</p>
	    		<a href="#annonce_fancybox_{{ i }}" class="fancybox">Contacter le vendeur</a>
	    	</div>
		</div><br/>

    	<div id="annonce_fancybox_{{ i }}" class="annonce_fancybox" style="display:none">
    		<div class="texte_fancybox">				
				<h2>{{ annonce.utilisateurAnonce.prenom|upper }} {{ annonce.utilisateurAnonce.nom|upper }}</h2>
				<img src="{{ asset('bundles/ppem2l/img/phone.png') }}" style="float:left;margin-left:4px" alt="phone"/>
	    		<p>{{ annonce.utilisateurAnonce.telephone }}</p>
	    	 	<img src="{{ asset('bundles/ppem2l/img/mail.png') }}" style="float:left" alt="mail"/>
		    	<a href="mailto:{{ annonce.utilisateurAnonce.email }}"><p>{{ annonce.utilisateurAnonce.email }}</p></a>
    		</div>
  		</div>
	  	{% set i = i + 1 %}
	{% endfor %}
</div>
<script type="text/javascript">
    $( document ).ready(function() {
		$('.ajoutAnnonce').fancybox({
		helpers : {
		        overlay : {
		            css : {
		                'background' : 'rgba(58, 42, 45, 0.95)'
		            }
		        }
		    },
		autoSize: false,
		width : "40%",
		height : "65%"
		});

		$('.fancybox').fancybox({
		helpers : {
		        overlay : {
		            css : {
		                'background' : 'rgba(58, 42, 45, 0.95)'
		            }
		        }
		    },
		autoSize: false,
		width : "30%",
		height : "20%"
		});

	});
</script>
{% endblock %}